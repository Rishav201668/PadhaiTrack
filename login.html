<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PadhaiTrack - Login</title>

  <!-- Firebase SDK v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  
  <!-- Link to external styles -->
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/login.css">
</head>
<body>
    <div class="toggle-container">
        <div class="toggle-btn" id="toggleMode"></div>
    </div>
  <!-- Login Form Section -->
  <div id="login-form">
    <h2>Login to PadhaiTrack</h2>
    <form id="loginForm">
      <label for="email">Email :</label>
      <input type="email" id="email" autocomplete="email" required>

      <label for="password">Password:</label>
      <input type="password" id="password" autocomplete="current-password" required>

      <button type="submit">Login</button>
    </form>
    <p>Don't have an account? <a href="signup.html">Sign Up</a></p>
  </div>
  <script type="module" src="js/login.js"></script>
  <!-- Firebase configuration -->
  <script>
    // Firebase configuration (replace with your actual Firebase project details)
    var firebaseConfig = {
      apiKey: "AIzaSyB_mdm1jwbAKwm4bQILZjcBJMQAa4gG7mE",
      authDomain: "padhaitrack.firebaseapp.com",
      projectId: "padhaitrack",
      storageBucket: "padhaitrack.firebasestorage.app",
      messagingSenderId: "655970824630",
      appId: "1:655970824630:web:dffcafdf887225cd3d1117",
      measurementId: "G-60QJ8BT69W"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var auth = firebase.auth();
    var db = firebase.firestore();
   
    // Get form elements
    var loginForm = document.getElementById('loginForm');
    var emailInput = document.getElementById('email');
    var passwordInput = document.getElementById('password');

    // Handle form submission
    loginForm.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent page reload on form submission

      var email = emailInput.value;
      var password = passwordInput.value;

      // Sign in the user using Firebase Authentication
      auth.signInWithEmailAndPassword(email, password)
        .then(function(userCredential) {
          var user = userCredential.user;
          console.log("User logged in successfully");
          // Redirect to the user's dashboard or another page after successful login
          window.location.href = "dashboard.html"; // Update this to your desired page
        })
        .catch(function(error) {
          console.error("Login failed:", error.message);
          alert("Login failed: " + error.message);
        });
    });
  </script>
 <script>
    document.getElementById('toggleMode').addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
    });

    // Automatically detect and apply the theme based on system preference
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.add('light-mode');
    }
  </script>
</body>
</html>
